/* BioShip Init Script (Comments Stripped) */
function bioship_showmainmenu() {jQuery(function($) {
	$('#mainmenushow').hide(); $('#mainmenuhide').css('display','inline-block'); 
	$('body').addClass('has-mobile-menu');
	$('#navigation').addClass('mobile-menu'); 
	$('#navigation #primarymenu').show();
}); }
function bioship_hidemainmenu() {jQuery(function($) {
	$('#mainmenuhide').hide(); $('#mainmenushow').css('display','inline-block');
	$('body').removeClass('has-mobile-menu');
	$('#navigation').removeClass('mobile-menu'); 
	$('#navigation #primarymenu').hide();
}); }
function bioship_showsidebar() {jQuery(function($) {
	if (document.getElementById('subsidebarshow')) {bioship_hidesubsidebar();}
	$('#sidebarshow').css('display','none'); $('#sidebarshowsmall').css('display','none');
	$('#sidebarhide').css('display','block'); $('#sidebarhidesmall').css('display','block');
	$('#sidebar').css('display','block').css('width','100%');
}); }
function bioship_hidesidebar() {jQuery(function($) {
	$('#sidebarhide').css('display','none'); $('#sidebarhidesmall').css('display','none');
	$('#sidebarshow').css('display','block'); $('#sidebarshowsmall').css('display','block');
	$('#sidebar').css('display','none').css('width','');
}); }
function bioship_showsubsidebar() {jQuery(function($) {
	if (document.getElementById('sidebarshow')) {bioship_hidesidebar();}
	$('#subsidebarshow').css('display','none'); $('#subsidebarshowsmall').css('display','none');
	$('#subsidebarhide').css('display','block'); $('#subsidebarhidesmall').css('display','block');
	$('#subsidebar').css('display','block').css('width','100%');
}); }
function bioship_hidesubsidebar() {jQuery(function($) {
	$('#subsidebarhide').css('display','none'); $('#subsidebarhidesmall').css('display','none');
	$('#subsidebarshow').css('display','block'); $('#subsidebarshowsmall').css('display','block');
	$('#subsidebar').css('display','none').css('width','');
}); }
function bioship_scrolltotop() {jQuery('html,body').animate({scrollTop: 0}, 1000);}
function bioship_smoothscrolling() {
	jQuery('a[href*="#"]:not([href="#"])').click(function() {
		if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
			var target = jQuery(this.hash);
			target = target.length ? target : jQuery('[name=' + this.hash.slice(1) +']');
			if (target.length) {
				var scrollto = target.offset().top + 150;
				jQuery('html,body').animate({scrollTop: scrollto}, 1000);
				return false;
			}
		}
	});
}
function bioship_stickyelements(elements) {
	for (i in elements) {
		$element = jQuery(elements[i]);
		if ($element.is(':visible')) {
			$element.stick_in_parent().on('sticky_kit:stick', function(e) {
				parentwidth = jQuery(e.target).parent().width();
				jQuery(e.target).parent().width(parentwidth-1+'px');
			});
		} else {$element.trigger('sticky_kit:detach');}
	}
}
function bioship_fitvids(elements) {
	for (i in elements) {jQuery(elements[i]).fitVids();}
}
function bioship_matchheights() {jQuery('.matchheight').matchHeight();}
function bioship_modernizr() {jQuery(document).Modernizr();}
function bioship_foundation() {jQuery(document).foundation();}
function bioship_resizeheaderlogo() {
	headerwidth = jQuery('#header').width();
	ratio = headerwidth / bioship.startheaderwidth;
	newlogowidth = bioship.logowidth * ratio;
	newlogoheight = bioship.logoheight * ratio;
	if (newlogowidth > headerwidth) {
		newlogowidth = headerwidth;
		newlogoheight = newlogowidth / bioship.logowidth * bioship.logoheight;
	}
	if (newlogowidth > bioship.logowidth) {
		newlogowidth = bioship.logowidth; newlogoheight = bioship.logoheight;
	}
	jQuery('#site-logo img.logo-image').width(newlogowidth);
	jQuery('#site-logo img.logo-image').height(newlogoheight);
}
function bioship_resizetitletexts() {
	if (bioship.calculatedratios == false) {
		jQuery('#header').css('width', bioship.maxwidth+'px !important');
		jQuery('#header').css('padding','0px !important').css('margin','0px !important');
		titlesize = jQuery('#site-title-text a').css('font-size').replace('px', '');
		descsize = jQuery('#site-description div').css('font-size').replace('px', '');
		titlelh = jQuery('#site-title-text a').css('line-height').replace('px','');
		desclh = jQuery('#site-description div').css('line-height').replace('px','');
		jQuery('#header').css('width', '').css('padding', '').css('margin', '');
		bioship.titleratio = titlesize / bioship.maxwidth;
		bioship.titlelratio = titlelh / bioship.maxwidth;
		bioship.descratio = descsize / bioship.maxwidth;
		bioship.desclratio = desclh / bioship.maxwidth;
		bioship.calculatedratios = true;
	}
	headerwidth = jQuery('#header').width();
	resizeratio = headerwidth / bioship.maxwidth;
	newtitlesize = headerwidth * bioship.titleratio;
	newtitlelh = headerwidth * bioship.titlelratio;
	newdescsize = headerwidth * bioship.descratio;
	newdesclh = headerwidth * bioship.desclratio;
	if (newtitlesize > titlesize) {newtitlesize = titlesize;}
	if (newtitlelh > titlelh) {newtitlelh = titlelh;}
	if (newdescsize > descsize) {newdescsize = descsize;}
	if (newdesclh > desclh) {newdesclh = desclh;}
	newtitlesize += 'px'; newtitlelh += 'px'; newdescsize += 'px'; newdesclh += 'px';
	jQuery('#site-title-text a').css('font-size', newtitlesize).css('line-height', newtitlelh);
	jQuery('#site-description div').css('font-size', newdescsize).css('line-height', newdesclh);
}
var headerratio = null;
function bioship_resizeheader() {
	if (headerratio == null) {
		startwidth = $('#header').width();
		jQuery('#header').css('width', bioship.maxwidth+'px !important');
		headerheight = $('#header').height();
		headerratio = headerheight / bioship.maxwidth;
		jQuery('#header').css('width', startwidth+'px');
	}
	headerwidth = jQuery('#header').width();
	newheaderheight = headerwidth * headerratio;
	jQuery('#header').css('height', newheaderheight);
}
function bioship_checkmobilebuttons() {
	screenwidth = jQuery(window).width();
	if (document.getElementById('mainmenubutton')) {
		if (screenwidth > 479) {
			jQuery('#mainmenubutton').hide();
			bioship_hidemainmenu(); // removes mobile menu
			setTimeout(function() {jQuery('#navigation #primarymenu').show();}, 100);
		} else {
			if (!jQuery('#navigation').hasClass('mobile-menu')) {
				jQuery('#navigation #primarymenu').hide();
			}
			jQuery('#mainmenubutton').show();
		}
	}
	if (document.getElementById('sidebarshow')) {
		if (document.getElementById('sidebarshow').style.display == 'none') {
			if (screenwidth > 639) {bioship_hidesidebar();}
		}
	}
	if (document.getElementById('subsidebarshow')) {
		if (document.getElementById('subsidebarshow').style.display == 'none') {
			if (screenwidth > 767) {bioship_hidesubsidebar();}
		}
	}
}
if ( (typeof bioship.stickynavbar !== 'undefined') 
  || (typeof bioship.stickylogo !== 'undefined') ) {
	window.onscroll = function() {bioship_stickynavbar()};
}
function bioship_stickynavbar() {
	if (typeof bioship.stickynavbar !== 'undefined') {
		if (window.pageYOffset == 0) {
			jQuery('#navigation').removeClass('sticky-navbar');
			if (typeof bioship.stickylogo !== 'undefined') {
				jQuery('#site-logo').removeClass('sticky-logo');
			}
			return;
		}
		navbar = document.getElementById('navigation');
		stickytop = navbar.offsetTop;
		if (window.pageYOffset >= stickytop) {
			jQuery('#navigation').addClass('sticky-navbar');
			if (typeof bioship.stickylogo !== 'undefined') {
				jQuery('#site-logo').addClass('sticky-logo');
			}
		} else {
			jQuery('#navigation').removeClass('sticky-navbar');
			if (typeof bioship.stickylogo !== 'undefined') {
				jQuery('#site-logo').removeClass('sticky-logo');
			}
		}
	} else {
		if (typeof bioship.stickylogo !== 'undefined') {
			if (window.pageYOffset == 0) {
				jQuery('#site-logo').removeClass('sticky-logo'); return;
			}
			sitelogo = document.getElementById('site-logo');
			stickytop = sitelogo.offsetTop;
			if (window.pageYOffset >= stickytop) {
				jQuery('#site-logo').addClass('sticky-logo');
			} else {jQuery('#site-logo').removeClass('sticky-logo');}
		}
	}
}
var bioship_resizedebounce = (function () {
	var timers = {};
	return function (callback, ms, uniqueId) {
		if (!uniqueId) {uniqueId = "nonuniqueid";}
		if (timers[uniqueId]) {clearTimeout (timers[uniqueId]);}
		timers[uniqueId] = setTimeout(callback, ms);
	};
})();
jQuery(document).ready(function($) {
	setTimeout(function() {
		$(function(){
			if (typeof superfish === 'function') {
				activclasses = 'li.current_page_item,li.current_page_parent,li.current_page_ancestor,li.current-cat,li.current-cat-parent,li.current-menu-item';
				$('#navigation ul.menu').find(activeclasses).addClass('active').end().superfish({autoArrows: true});
			}
		});
		$(function(){$('a[rel*="external"]').click( function() {window.open(this.href); return false;}); });
		$(function(){$('p.tags a').wrap('<span class="st_tag" />');});
		$(function(){$("body.error404 #content #s").focus();});
		if (typeof bioship.smoothscrolling !== 'undefined') {
			if (bioship.smoothscrolling == 'yes') {bioship_smoothscrolling();}
		}
		if (typeof bioship.stickyelements !== 'undefined') {
			bioship_stickyelements(bioship.stickyelements);
		}
		if (typeof bioship.fitvidselements !== 'undefined') {
			bioship_fitvids(bioship.fitvidselements);
		}
		if (typeof bioship.loadmodernizr !== 'undefined') {
			if (bioship.loadmodernizr == 'yes') {bioship_modernizr();}
		}
		if (typeof loadfoundation !== 'undefined') {
			if (bioship.loadfoundation == 'yes') {bioship_foundation();}
		}
		if (typeof loadmatchheights !== 'undefined') {
			if (bioship.loadmatchheights == 'yes') {bioship_matchheights();}
		}
		bioship_checkmobilebuttons();
		bioship.startheaderwidth = jQuery('#header').width();
		bioship.startheaderheight = jQuery('#header').height();
		bioship.logowidth = jQuery('#site-logo img.logo-image').width();
		bioship.logoheight = jQuery('#site-logo img.logo-image').height();
		bioship.calculatedratios = false;
		if (typeof bioship.logoresize !== 'undefined') {
			if (bioship.logoresize == 'yes') {bioship_resizeheaderlogo();}
		}
		if (typeof bioship.sitetextresize !== 'undefined') {
			if (bioship.sitetextresize == 'yes') {bioship_resizetitletexts();}
		}
		if (typeof bioship.headerresize !== 'undefined') {
			if (bioship.headerresize == 'yes') {bioship_resizeheader();}
		}
	}, 100);
	$(window).resize(function () {
		bioship_resizedebounce(function(){
			if ( (typeof bioship.stickynavbar !== 'undefined') 
			  || (typeof bioship.stickylogo !== 'undefined') ) {
				bioship_stickynavbar();
			}
			bioship_checkmobilebuttons();
			if (typeof bioship.logoresize !== 'undefined') {
				if (bioship.logoresize == 'yes') {bioship_resizeheaderlogo();}
			}
			if (typeof bioship.sitetextresize !== 'undefined') {
				if (bioship.sitetextresize == 'yes') {bioship_resizetitletexts();}
			}
			if (typeof bioship.headerresize !== 'undefined') {
				if (bioship.headerresize == 'yes') {bioship_resizeheader();}
			}
			if (typeof bioship.loadmatchheights !== 'undefined') {
				if (bioship.loadmatchheights == 'yes') {bioship_matchheights();}
			}
			if (typeof bioship.stickyelements !== 'undefined') {
				bioship_stickyelements(bioship.stickyelements);
			}
		}, 750, "themejavascript");
	});
});